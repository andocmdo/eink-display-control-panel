<!DOCTYPE html>
<html>
<head>
    <title>E-Ink Display Control Panel</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</head>
<body>
    <h1>E-Ink Display Control Panel</h1>

    <p>
        <a href="/preview" target="_blank"><button type="button">Preview Display</button></a>
        <a href="/config"><button type="button">Configuration</button></a>
    </p>

    <hr>

    <h2>Update Actions</h2>
    <div id="update-status" style="margin: 10px 0; padding: 10px; display: none;"></div>
    <p>
        <button hx-get="/update/weather"
                hx-target="#update-status"
                hx-swap="innerHTML"
                onclick="document.getElementById('update-status').style.display='block'">Update Weather</button>

        <button hx-get="/update/stocks"
                hx-target="#update-status"
                hx-swap="innerHTML"
                onclick="document.getElementById('update-status').style.display='block'">Update Stocks</button>

        <button hx-get="/update/display"
                hx-target="#update-status"
                hx-swap="innerHTML"
                onclick="document.getElementById('update-status').style.display='block'">Push to Display</button>
    </p>

    <hr>

    <h2>Todo Items</h2>
    <div id="todos-list">
        {% with todos=data['todos'] %}
            {% include 'todos_list.html' %}
        {% endwith %}
    </div>
    <button hx-post="/todos/add"
            hx-target="#todos-list"
            hx-swap="innerHTML">Add Todo</button>

    <form method="POST">
        <h2>Weather Locations</h2>
        <p>Enter up to 3 locations (zip code or city, state):</p>
        {% for i in range(3) %}
        <div>
            <label>Location {{ i + 1 }}:</label>
            <input type="text" name="weather_{{ i }}" value="{% if i < data.get('weather', [])|length %}{{ data['weather'][i]['location'] }}{% endif %}">
        </div>
        {% endfor %}

        <h2>Stock Tickers</h2>
        <p>Enter up to 10 stock tickers:</p>
        {% for i in range(10) %}
        <div>
            <label>Ticker {{ i + 1 }}:</label>
            <input type="text" name="stock_{{ i }}" value="{% if i < data.get('stocks', [])|length %}{{ data['stocks'][i]['ticker'] }}{% endif %}">
        </div>
        {% endfor %}

        <br>
        <button type="submit">Save Weather & Stocks</button>
    </form>

    <hr>

</body>
</html>
